<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">




  <link rel="canonical" href="http://yoursite.com/page/2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Hexo</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/01/设计模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/01/设计模式/" class="post-title-link" itemprop="url">设计模式</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-01 10:02:44" itemprop="dateCreated datePublished" datetime="2019-05-01T10:02:44+08:00">2019-05-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">0</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/01/OpenMP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/01/OpenMP/" class="post-title-link" itemprop="url">OpenMP</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-01 01:35:55" itemprop="dateCreated datePublished" datetime="2019-05-01T01:35:55+08:00">2019-05-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">102</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.it1352.com/349766.html" target="_blank" rel="noopener">如何保证动态分配的数组是私人的OpenMP(How to ensure a dynamically allocated array is private in openmp)</a></p>
<p><a href="http://xsk.tehon.org/den/index.php/category/tech/openmp-notes-programming.html" target="_blank" rel="noopener">OpenMP学习笔记：编程</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/01/SVN使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/01/SVN使用/" class="post-title-link" itemprop="url">SVN使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-01 01:33:49" itemprop="dateCreated datePublished" datetime="2019-05-01T01:33:49+08:00">2019-05-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">36</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考<a href="https://www.cnblogs.com/linlf03/p/6923519.html" target="_blank" rel="noopener">TortoiseSVN比较工具设置为BeyondCompare 4</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/qwt使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/qwt使用/" class="post-title-link" itemprop="url">qwt使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-30 23:32:52" itemprop="dateCreated datePublished" datetime="2019-04-30T23:32:52+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">4.8k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">4 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>近期需要做一个调试小工具，用于可视化调试LUT，可以使用Qt的Qwt库，全称是Qt Widgets for Technical Applications，用于生成各种统计图。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>官网介绍<a href="https://qwt.sourceforge.io/index.html" target="_blank" rel="noopener">Qwt User’s Guide</a></p>
<p>MSVC-2015 64bit的完整安装教程，<a href="https://www.qtcentre.org/threads/66576-Installing-Qwt-with-MSVC-2015-64bit-compiler-on-Windows-(complete-instructions" target="_blank" rel="noopener">Installing Qwt with MSVC-2015 64bit compiler on Windows (complete instructions)</a>)。我使用的是Qt 5.12.0。源码路径和安装路径最好分离开，便于重新再来。<br>完整以上安装后，为了方便VS使用还需要做一些简单lib、bin和include的配置。参考<a href="https://blog.csdn.net/toby54king/article/details/78852396" target="_blank" rel="noopener">QWT6.1.3编译、配置和使用（Vs2010+Qwt6.1.3+Qt5.5.1编译）</a>。</p>
<p>安装后的文件<br><img src="/2019/04/30/qwt使用/2019-05-01-01-00-40.png" alt></p>
<ol>
<li>对Qt的安装路径配置环境变量<br><img src="/2019/04/30/qwt使用/2019-05-01-00-57-36.png" alt></li>
<li>拷贝include目录到Qt的include目录，最好新建个Qwt的子目录</li>
<li>拷贝<strong>lib\qwt.lib</strong>和<strong>qwtd.lib</strong>到Qt的lib目录下</li>
<li>拷贝<strong>lib\qwt.dll</strong>和<strong>qwtd.dll</strong>到Qt的bin目录下</li>
<li>拷贝<strong>plugins\designer\qwt_designer_plugin.dll</strong>到<strong>plugins\designer</strong>目录下，用于qt designer。</li>
<li>配置VS（有些不是必须的，但最好配置上）<ol>
<li>配置头文件：<code>$(QTDIR)\include\Qwt</code><br><img src="/2019/04/30/qwt使用/2019-05-01-01-04-35.png" alt></li>
<li>配置可执行文件：<code>qwtd.lib</code>（如果是Release版本用<code>qwt.lib</code>）<br><img src="/2019/04/30/qwt使用/2019-05-01-01-05-32.png" alt></li>
<li>配置预处理器：QWT_DLL<br><img src="/2019/04/30/qwt使用/2019-05-01-01-08-08.png" alt></li>
</ol>
</li>
<li>跑提供的测试代码<a href="https://www.qtcentre.org/threads/66576-Installing-Qwt-with-MSVC-2015-64bit-compiler-on-Windows-(complete-instructions" target="_blank" rel="noopener">Installing Qwt with MSVC-2015 64bit compiler on Windows (complete instructions)</a>)<br>基本效果如下<br><img src="/2019/04/30/qwt使用/2019-05-01-01-10-16.png" alt></li>
</ol>
<p>MSVC-2017应该也有类似的教程。</p>
<h2 id="qwt-demo"><a href="#qwt-demo" class="headerlink" title="qwt demo"></a>qwt demo</h2><p>网络上的资源参差不齐，最好还是从官方提供的example入手，之前就是因为没有完整编译好工程导致有些demo没看到，苦苦看源码搜资料查了好久。</p>
<ol>
<li>animation</li>
<li>barchart：柱状图、导出按钮combox</li>
<li>bode：picker数据拾取器</li>
<li>controls：多个tab</li>
<li>cpuplot：legend选择可隐藏</li>
<li>curvdemo1</li>
<li>dials：多个tab</li>
<li>distrowatch</li>
<li>event_filter：曲线上鼠标拖动点</li>
<li>friedberg</li>
<li>itemeditor：editor</li>
<li>legends：layout设计、多个按钮控制显示</li>
<li>oscilloscope</li>
<li>radio</li>
<li>rasterview：放大缩小</li>
<li>realtime：组合控制</li>
<li>refreshtest</li>
<li>scatterplot：平移放大缩小</li>
<li>simpleplot：简单曲线显示</li>
<li>sinusplot：always picker</li>
<li>spectrogram</li>
<li>stockchart：checkbox</li>
<li>sysinfo</li>
<li>tvplot</li>
</ol>
<p>这里列几个典型的</p>
<p><img src="/2019/04/30/qwt使用/2019-05-01-01-59-06.png" alt><br><img src="/2019/04/30/qwt使用/2019-05-01-01-58-14.png" alt><br><img src="/2019/04/30/qwt使用/2019-05-01-01-55-00.png" alt><br><img src="/2019/04/30/qwt使用/2019-05-01-01-57-10.png" alt></p>
<h2 id="使用过程中一些小细节"><a href="#使用过程中一些小细节" class="headerlink" title="使用过程中一些小细节"></a>使用过程中一些小细节</h2><ol>
<li>按钮出现中文乱码</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 源码文件的字符集不是UTF8 ？</span></span><br><span class="line"><span class="comment">// 如果是Qt5.x，则：</span></span><br><span class="line">fileBtn-&gt;setText(tr(<span class="string">"文件标准对话框"</span>));</span><br><span class="line"><span class="comment">// 修改为</span></span><br><span class="line">fileBtn-&gt;setText(QStringLiteral(<span class="string">"文件标准对话框"</span>));</span><br></pre></td></tr></table></figure>
<ol>
<li>pushbutton的简单使用</li>
<li><a href="https://blog.csdn.net/qq_25800311/article/details/80913477" target="_blank" rel="noopener">Qt QPushButton</a></li>
</ol>
<h2 id="Qt的MVC设计模式"><a href="#Qt的MVC设计模式" class="headerlink" title="Qt的MVC设计模式"></a>Qt的MVC设计模式</h2><p>网络上关于Qt的介绍还是相对不多的，这里记录下Qt相关的东西，便于回溯。</p>
<h3 id="架构、框架和设计模式"><a href="#架构、框架和设计模式" class="headerlink" title="架构、框架和设计模式"></a>架构、框架和设计模式</h3><p>ref:<br><a href="https://www.cnblogs.com/the-wang/p/7258303.html" target="_blank" rel="noopener">架构、框架和设计模式</a></p>
<h4 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h4><p>软件架构是系统的一个草图，阐述了各个组件之间的通信，层次划分，一旦系统开始详细设计，架构蓝图就很难甚至无法改变。</p>
<p>例如：三层架构：一种设计软件架构的思想。</p>
<p>通常意义上的三层架构就是将整个业务应用划分为表示层（User Interface  Layer）、业务逻辑层（Buesiness Logic Layer）、数据访问层（Data Access Layer）。区分层次的目的是为了体现“高内聚，低耦合”的思想。</p>
<ol>
<li>表示层<br> 表示层位于最外层（最上层），最接近于用户。用于显示数据和接收用户输入的数据为用户提供一种交互式的操作界面。</li>
<li>业务逻辑层<br> 业务逻辑层无疑是系统架构中体现核心价值的部分。他的关注点主要集中在业务规则的制定、业务流程的实现等与业务需求相关的系统设计上，也就是说，他与系统所对应的领域（Domain）逻辑有关，很多时候，也将业务逻辑层称为领域层。<br> 业务逻辑层在体系架构中的位置很关键，他处于数据访问层与表示层中间起到了数据交换中承上启下的作用。对于数据访问层而言，他是调用者；对于表示层而言，他却是被调用者。</li>
<li>数据访问层<br> 数据访问层有时候也称为持久层，其功能主要是负责数据库的访问，可以访问数据库系统、二进制文件、文本文档、或是XML文档。简单的说法就是实现对数据表的Select、Insert、Update和Delete操作。</li>
</ol>
<h4 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h4><p>软件框架是（Framework）是项目软件开发过程中提取特定领域软件的共性部分形成的体系结构，不同领域的软件项目有着不同的框架类型。<strong>框架的作用在于：由于提取了特定领域软件的共性部分，因此在此领域内新项目开发过程中代码不需要从头编写，只需要编写在框架的基础上进行一些开发和调整便可满足要求：对于开发过程而言，这样做会提高软件的质量减低成本，缩短开发时间，是的开发越做越轻松，效益越做越好，形成一种良性循环。</strong></p>
<p>框架不是现成可用的应用系统，<strong>他是一个半成品</strong>，需要后来的开发人员进行二次开发，实现具体功能的应用系统。框架也不是平台，平台的概念比较模糊，他可以是一种操作系统、一种应用服务器、一种数据库软件或一种通信软件等，因此平台在应用方面主要指提供特定服务的系统软件；而框架更侧重于设计和开发过程，或者可以说，框架通过调用平台提供的服务而起作用。</p>
<p>框架也不是工具包或者类库。望文生义，类库就是一些类的集合，只要我们将一些可以复用的类集中放到一个Library中，就可以称其为一个类库。类库中的许多元素（如：类、结构、接口、枚举等）之间可能有一些关联，但这些关联通常用于支持一个类概念或接口概念的完整表达。如果从一个更高的视角来审视类库，可以发现类库中的一个个“完整的概念”之间是无关的或是关系松散的，框架和类库有着相似的形式，即框架往往也是类的集合；但不同之处在于，<strong>框架中的各个类并不是孤立的，框架中的业务逻辑代码是将不同的类连在一起在他们之间建立协作关系</strong>，例如：Spring-一个开源的Web设计规范。</p>
<h4 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h4><p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p>
<p>设计模式是对某种环境下反复出现的问题以及解决该问题的方案描述，比框架更加抽象；框架可以用代码表示，也能直接执行或复用，而对模式而言只有实例才能用代码表示;设计模式是比框架更小的元素，一个框架中往往含有一个或多个设计模式，框架总是针对某一特定应用领域，但同一模式却可适用于各种应用。</p>
<h4 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h4><ol>
<li>框架与设计模式<br> 框架通常是代码重用，而设计模式是设计重用，架构介于两者之间，部分代码重用部分设计重用。<br> 设计模式研究的是针对单一问题的设计思路和解决方法，一个模式可以应用于不同的框架和被不同的语言所实现；而框架则是一个应用的体系结构，是一种或多种设计模式和代码的混合体，虽然他们有所不同，但却共同致力于使人们的设计可以被重用，在思想上存在着统一性的特点，因而设计模式的思想可以在框架设计中进行应用。</li>
<li>框架与架构<br> 框架不是架构，框架比架构更具体，更偏重于技术，而架构偏重于设计。一个架构可以通过多种框架来实现.</li>
<li>架构与设计模式<br> 设计模式主要是针对单一问题的解决方法，范畴比较小，而架构是高层次的针对体系结构的一种设计思路，范畴比较大。可以说一个架构中可能会出现多个设计模式类解决架构中的多种问题。</li>
</ol>
<p>通过上面的分析，可以看出这三者之间得区别还有很多，首先架构是一个范畴最大的概念，是最高层次的设计，一个架构设计中可能会用到多个框架和多个设计模式；而框架是针对共性抽象出来的半成品，这里面可能包含着多个设计模式；而设计模式就是解决单一问题的设计思路和解决方法。</p>
<p>要做好一个项目，架构设计、框架设计和使用、设计模式都是非常重要的。<strong>我们在做一个项目的时候首先设计出来的应该是架构，是对整个问题的一个总体上的设计，之后再会考虑运用什么样的框架和设计模式来实现我们的框架；当然，只使用框架和设计模式中的一种也是经常遇到的。</strong></p>
<p>这三者的共同点都是为解决现实生活中的问题而出现的，都为了使我们的设计更面向对象化。</p>
<h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><p>MVC设计模式起源于SmallTalk的一种与用户界面相关的设计模式，可以有效分离数据和用户界面。</p>
<p>MVC设计模式包含三个元素：<br>表示数据的模型（Model），表示用户界面的识图（View），定义了用户在界面上的操作控制（Control）。这和典型的三层架构不同。MVC是设计模式，属于微观的解决方案；三层架构是系统架构，属于宏观的解决方案。</p>
<h3 id="Qt的MVC——InterView框架（MVD）"><a href="#Qt的MVC——InterView框架（MVD）" class="headerlink" title="Qt的MVC——InterView框架（MVD）"></a>Qt的MVC——InterView框架（MVD）</h3><ul>
<li><a href="https://blog.csdn.net/weixin_39743893/article/details/80625759" target="_blank" rel="noopener">Qt的MVC设计模式——InterView框架（MVD）</a></li>
<li><a href="https://blog.csdn.net/u012521552/article/details/51771318" target="_blank" rel="noopener">Qt5MVC模式(一)</a></li>
<li><a href="https://blog.csdn.net/rl529014/article/details/52072380" target="_blank" rel="noopener">Qt中的MVC （模型/视图结构）</a></li>
</ul>
<p>与MVC设计模式类似，Qt引入了模型/视图结构用于完成数据与界面的分离，即InterView框架。但不同的是，Qt的InterView框架中把视图和控制部件结合在一起，使得框架更为简洁。<br>为了灵活地处理用户输入，InterView框架引入了代理（Delegate）。通过使用代理，能够自定义数据条目（item）的显示和编辑方式。</p>
<p>Qt的模型/视图结构分为了三种部分：</p>
<ul>
<li>模型（Model）</li>
<li>视图（View）</li>
<li>代理（Delegate）</li>
</ul>
<p>如下图，模型与数据通信，并为了其它部件提供接口；<br>而视图从模型中获得用来引用数据条目的模型索引（Model Index）；<br>在视图中，代理负责绘制数据条目，当编辑条目时，代理和模型直接进行通信。<br>模型/视图/代理之间通过信号和槽进行通信。</p>
<p><img src="/2019/04/30/qwt使用/2019-05-01-01-18-30.png" alt></p>
<p>它们之间的关系如下：<br>数据发生改变时，模型发出信号通知视图；<br>用户对界面进行操作，视图发生信号；<br>代理发出信号告知模型和视图编辑器目前的状态。</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ol>
<li>模型（Model）<br> 抽象基类QAbstractItemModel<br> 列表的抽象基类QAbstractListModel、表格的抽象基类QAbstractTableModel、QAbstractProxyModel<br> QProxyModel<br> QDirModel<br> QFileSystemModel<br> QHelpContentModel<br> QStandardItemModel类继承</li>
<li>视图（View）<br> 抽象基类QAbstractItemView<br> QListView—QListWidget\QUndoView<br> QTableView—QTableWidget<br> QTreeView—QTreeWidget<br> QColumnView<br> QHeaderView<br> 实际上：QListWidget、QTableWidget、QTreeWidget已经包含数据，是模型与视图集成的。</li>
<li>代理（Delegate）<br> 抽象基类QAbstractItemDelegate<br> QItemDelegate<br> QStyleItemDelegate<br> 类QItemDelegate由类QSqlRelationDelegate继承</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/快捷键/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/快捷键/" class="post-title-link" itemprop="url">快捷键</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-30 01:27:10" itemprop="dateCreated datePublished" datetime="2019-04-30T01:27:10+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">1.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>仅仅记录实际使用到的或者高频使用的，可能的不记录。</p>
<h2 id="VSCode"><a href="#VSCode" class="headerlink" title="VSCode"></a>VSCode</h2><p><a href="https://github.com/crper/Visual-Studio-Code-CNKEYMAP" target="_blank" rel="noopener">Visual-Studio-Code-CNKEYMAP</a></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alt + Click</td>
<td>插入多个光标</td>
</tr>
<tr>
<td>Alt + Shift + Click</td>
<td>列选（等价中键）</td>
</tr>
<tr>
<td>Ctrl + Alt + Down/Up</td>
<td>键盘列选</td>
</tr>
<tr>
<td>Alt + Shift + F</td>
<td>格式化</td>
</tr>
<tr>
<td>Ctrl + [ / ]</td>
<td>缩进</td>
</tr>
<tr>
<td>Ctrl + 左键文件名</td>
<td>vsplit一个新的编辑器</td>
</tr>
<tr>
<td>Ctrl + \</td>
<td>vsplit一个新的编辑器</td>
</tr>
<tr>
<td>Alt + Up/Down</td>
<td>上下移动一行</td>
</tr>
<tr>
<td>Alt + Shift + Up/Down</td>
<td>上下复制一行</td>
</tr>
<tr>
<td>Ctrl + U</td>
<td>删除光标左侧</td>
</tr>
<tr>
<td>Alt + Shift + Right</td>
<td>会选中匹配括号中的内容，并可以扩大选中区域</td>
</tr>
<tr>
<td>Ctrl + Shift + `</td>
<td>新建终端</td>
</tr>
</tbody>
</table>
</div>
<h2 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h2><div class="table-container">
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl + U</td>
<td>删除光标到行首的所有字符,在某些设置下,删除全行</td>
</tr>
<tr>
<td>Crl + Delete</td>
<td>删除光标右侧</td>
</tr>
<tr>
<td>Ctrl + W</td>
<td>删除当前光标到前边的最近一个空格之间的字符</td>
</tr>
<tr>
<td>Ctrl + A</td>
<td>相当于Home</td>
</tr>
</tbody>
</table>
</div>
<h2 id="snipaste"><a href="#snipaste" class="headerlink" title="snipaste"></a>snipaste</h2><p>最好进行修改</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alt + F1</td>
<td>snip</td>
</tr>
<tr>
<td>Alt + F2</td>
<td>paste</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Qt-Creator"><a href="#Qt-Creator" class="headerlink" title="Qt Creator"></a>Qt Creator</h2><ul>
<li><a href="https://blog.51cto.com/9291927/2118474" target="_blank" rel="noopener">Qt高级——QtCreator常用快捷键</a></li>
<li><a href="http://c.biancheng.net/view/1825.html" target="_blank" rel="noopener">Qt Creator使用技巧</a> 应该是翻译自官网的文档[]</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Ctrl + R</strong></td>
<td>运行</td>
</tr>
<tr>
<td>F4</td>
<td>QtDesigner进入信号槽的设置， 源文件和头文件之间切换</td>
</tr>
<tr>
<td><strong>F2</strong></td>
<td>转到定义</td>
</tr>
<tr>
<td><strong>Ctrl + I</strong></td>
<td>格式化代码（需先全选）</td>
</tr>
<tr>
<td>Ctrl + Space</td>
<td>代码补全</td>
</tr>
<tr>
<td><strong>Shift + F2</strong></td>
<td>声明和定义之间的跳转</td>
</tr>
<tr>
<td>Ctrl + B</td>
<td>编译工程</td>
</tr>
<tr>
<td>Alt + Enter</td>
<td>将光标移动到h文件中方法声明，添加方法实体</td>
</tr>
<tr>
<td>Ctrl+/</td>
<td>注释行，取消注释行</td>
</tr>
<tr>
<td>Alt + ←</td>
<td>后退</td>
</tr>
<tr>
<td>Alt + →</td>
<td>前进</td>
</tr>
<tr>
<td>Ctrl+Shift+R</td>
<td>Refactor\Rename Symbol Under Cursor</td>
</tr>
<tr>
<td>F1</td>
<td>查看帮助</td>
</tr>
</tbody>
</table>
</div>
<p>VS<br>| 快捷键       | 作用                                      |<br>| —————— | ————————————————————- |<br>| Ctrl + k, Ctrl + O| 切换头文件和源文件|</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/Linux使用小记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/Linux使用小记/" class="post-title-link" itemprop="url">Linux使用小记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-30 00:45:45" itemprop="dateCreated datePublished" datetime="2019-04-30T00:45:45+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">4.5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">4 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>近期需要回顾一些基础知识，需要相对系统地学习一下。</p>
<h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><ul>
<li><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/index.html" target="_blank" rel="noopener">Linux工具快速教程</a> 主要参考的文档</li>
</ul>
<h2 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h2><ul>
<li>在只记得部分命令关键字的场合，我们可通过<code>man -k</code>来搜索；</li>
<li>需要知道某个命令的简要说明，可以使用<code>whatis</code>；用`whatis -w “loca*”实现正则匹配；</li>
<li>而更详细的介绍，则可用<code>info</code>命令；</li>
<li>查看命令在哪个位置，我们需要使用<code>which</code>；当系统中安装了同一软件的多个版本时，不确定使用的是哪个版本时，这个命令就能派上用场；</li>
<li>而对于命令的具体参数及使用方法，我们需要用到强大的<code>man</code>；</li>
</ul>
<p>在man的帮助手册中，将帮助文档分为了9个类别，对于有的关键字可能存在多个类别中， 我们就需要指定特定的类别来查看；（一般我们查询bash命令，归类在1类中）；</p>
<ol>
<li><strong>用户可以操作的命令或者是可执行文件</strong></li>
<li>系统核心可调用的函数与工具等</li>
<li><strong>一些常用的函数与数据库</strong></li>
<li>设备文件的说明</li>
<li>设置文件或者某些文件的格式</li>
<li>游戏</li>
<li>惯例与协议等。例如Linux标准文件系统、网络协议、ASCⅡ，码等说明内容</li>
<li>系统管理员可用的管理条令</li>
<li>与内核有关的文件</li>
</ol>
<p>我们看到printf在分类1和分类3中都有；分类1中的页面是命令操作及可执行文件的帮助；而3是常用函数库说明；如果我们想看的是C语言中printf的用法，可以指定查看分类3的帮助：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">man 3 <span class="built_in">printf</span></span><br></pre></td></tr></table></figure>
<h2 id="文件及目录"><a href="#文件及目录" class="headerlink" title="文件及目录"></a>文件及目录</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看当前目录下文件个数</span></span><br><span class="line">find ./ | wc -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制目录</span></span><br><span class="line">cp -r source_dir  dest_dir</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到home目录</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按时间排序，新的在前</span></span><br><span class="line">ls -lt</span><br><span class="line">ls -ltr</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给每项文件前面增加一个id编号</span></span><br><span class="line">ls | cat -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜寻文件或目录:</span></span><br><span class="line">find ./ -name <span class="string">"core*"</span> | xargs file <span class="comment"># xargs是列出文件类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找目标文件夹中是否有obj文件:</span></span><br><span class="line">find ./ -name <span class="string">'*.o'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归当前目录及子目录删除所有.o文件</span></span><br><span class="line">find ./ -name <span class="string">"*.o"</span> -<span class="built_in">exec</span> rm &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>find是实时查找，如果需要更快的查询，可试试locate；locate会为文件系统建立索引数据库，如果有文件更新，需要定期执行更新命令来更新索引库</p>
<p><strong>cat vi head tail more</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示时同时显示行号</span></span><br><span class="line">cat -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示文件第一行:</span></span><br><span class="line">head -1 filename</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示文件倒数第五行:</span></span><br><span class="line">tail -5 filename</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看两个文件间的差别:</span></span><br><span class="line">diff file1 file2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 动态显示文本最新信息:</span></span><br><span class="line">tail -f crawler.log</span><br><span class="line"></span><br><span class="line">ln cc ccAgain <span class="comment"># 硬连接；删除一个，将仍能找到；</span></span><br><span class="line">ln -s cc ccTo <span class="comment"># 符号链接(软链接)；删除源，另一个无法使用；（后面一个ccTo 为新建的文件）</span></span><br></pre></td></tr></table></figure>
<p>批处理命令连接执行，使用 |<br>串联: 使用分号 ;<br>前面成功，则执行后面一条，否则，不执行:&amp;&amp;<br>前面失败，则后一条执行: ||</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ls /proc &amp;&amp; <span class="built_in">echo</span>  suss! || <span class="built_in">echo</span> failed.</span><br></pre></td></tr></table></figure>
<h3 id="查看文件夹大小"><a href="#查看文件夹大小" class="headerlink" title="查看文件夹大小"></a>查看文件夹大小</h3><p><a href="https://www.jianshu.com/p/936ae380de54" target="_blank" rel="noopener">linux下使用 du查看某个文件或目录占用磁盘空间的大小</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -h：以人类可读的方式显示</span></span><br><span class="line"><span class="comment"># -s：显示目录占用的磁盘空间大小，不显示其下子目录和文件占用的磁盘空间大小</span></span><br><span class="line"><span class="comment"># 查看当前目录总共占的容量。而不单独列出各子项占用的容量</span></span><br><span class="line">du -sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前路径下一级子目录的占用大小（不包含文件）</span></span><br><span class="line">du -h --max-depth=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 包含文件和文件夹</span></span><br><span class="line">du -ah --max-depth=1</span><br></pre></td></tr></table></figure>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>参考<a href="https://blog.csdn.net/jiangyanting2011/article/details/78875928" target="_blank" rel="noopener">Linux下的环境变量</a></p>
<p>Linux中环境变量包括系统级和用户级，系统级的环境变量是每个登录到系统的用户都要读取的系统变量，而用户级的环境变量则是该用户使用系统时加载的环境变量。所以管理环境变量的文件也分为系统级和用户级的。</p>
<ol>
<li>系统级<ol>
<li><code>/etc/environment</code>: 是系统在登录时读取的第一个文件，<strong>用于为所有进程设置环境变量。</strong></li>
<li><code>/etc/profile</code>：是系统登录时执行的第二个文件，可以用于设定针对全系统所有用户的环境变量。该文件一般是调用<code>/etc/bash.bashrc</code>文件。</li>
<li><code>/etc/bash.bashrc</code>：系统级的<code>bashrc</code>文件，为每一个运行bash shell的用户执行此文件。此文件会在用户每次打开shell时执行一次。</li>
</ol>
</li>
<li>用户级<ol>
<li><code>~/.profile</code>: 是对应当前登录用户的profile文件，用于定制当前用户的个人工作环境。 每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次!默认情况下,他设置一些环境变量,执行用户的.bashrc文件。</li>
<li><code>~/.bashrc</code>: 是对应当前登录用户的bash初始化文件，当用户每次打开shell时，系统都会执行此文件一次。平时设置这个文件就可以了。</li>
</ol>
</li>
</ol>
<p>那么根据以上描述，这几个文件的执行先后顺序应当是：<br><code>/etc/enviroment –&gt;/etc/profile –&gt;~/.profile –&gt;/etc/bash.bashrc–&gt; ~/.bashrc</code></p>
<p>配置环境变量</p>
<ol>
<li><p>临时生效<br> 直接运行export命令定义变量【只对当前shell(BASH)有效(临时的)】</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/webserver/php/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对当前用户有效<br>编辑<code>~/.bashrc</code>并添加<code>export PATH=$PATH:/usr/local/webserver/php/bin</code>；用<code>source ~/.bashrc</code>让修改马上生效</p>
</li>
<li>对所有用户生效<br> 在<code>/etc/profile</code>文件中添加变量，并执行<code>source /etc/profile</code></li>
</ol>
<h2 id="文件与目录权限修改"><a href="#文件与目录权限修改" class="headerlink" title="文件与目录权限修改"></a>文件与目录权限修改</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">chown <span class="comment"># 改变文件的拥有者</span></span><br><span class="line">chmod <span class="comment">#改变文件读、写、执行等属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归子目录修改</span></span><br><span class="line">chomd chown -R tuxapp <span class="built_in">source</span>/</span><br><span class="line">chown 777 -R test_dir</span><br></pre></td></tr></table></figure>
<p><code>chmod</code>的语法为</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">chmod [who] [+ | - | =] [mode] 文件名</span><br></pre></td></tr></table></figure>
<ul>
<li>u 表示“用户（user）”，即文件或目录的所有者。</li>
<li>g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。</li>
<li>o 表示“其他（others）用户”。</li>
<li>a 表示“所有（all）用户”。它是系统默认值。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在一个命令行中可给出多个权限方式，其间用逗号隔开</span></span><br><span class="line">chmod g+r，o+r example <span class="comment"># 使同组和其他用户对文件example 有读权限</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对所有用户增加执行权限</span></span><br><span class="line">chmod a+x sort</span><br></pre></td></tr></table></figure>
<h2 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h2><h3 id="find-文件查找"><a href="#find-文件查找" class="headerlink" title="find 文件查找"></a>find 文件查找</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查找txt和pdf文件:</span></span><br><span class="line">find . \( -name <span class="string">"*.txt"</span> -o -name <span class="string">"*.pdf"</span> \) -<span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则方式查找.txt和pdf:</span></span><br><span class="line"><span class="comment"># -iregex： 忽略大小写的正则</span></span><br><span class="line">find . -regex  <span class="string">".*\(\.txt|\.pdf\)$"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 否定参数 ,查找所有非txt文本:</span></span><br><span class="line">find . ! -name <span class="string">"*.txt"</span> -<span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定搜索深度,打印出当前目录的文件（深度为1）:</span></span><br><span class="line">find . -maxdepth 1 -<span class="built_in">type</span> f</span><br><span class="line"></span><br><span class="line"><span class="comment">## 定制搜索</span></span><br><span class="line"><span class="comment"># 按类型搜索</span></span><br><span class="line">find . -<span class="built_in">type</span> d -<span class="built_in">print</span>  //只列出所有目录</span><br><span class="line"><span class="comment"># -type f 文件 / l 符号链接 / d 目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># file命令可以检查文件具体类型（二进制或文本），find不行</span></span><br><span class="line"><span class="comment"># $ file redis-cli  # 二进制文件</span></span><br><span class="line"><span class="comment"># redis-cli: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped</span></span><br><span class="line"><span class="comment"># $ file redis.pid  # 文本文件</span></span><br><span class="line"><span class="comment"># redis.pid: ASCII text</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以用以下命令组合来实现查找本地目录下的所有二进制文件:</span></span><br><span class="line">ls -lrt | awk <span class="string">'&#123;print $9&#125;'</span>|xargs file|grep  ELF| awk <span class="string">'&#123;print $1&#125;'</span>|tr -d <span class="string">':'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按时间搜索</span></span><br><span class="line"><span class="comment"># -atime 访问时间 (单位是天，分钟单位则是-amin，以下类似）</span></span><br><span class="line"><span class="comment"># -mtime 修改时间 （内容被修改）</span></span><br><span class="line"><span class="comment"># -ctime 变化时间 （元数据或权限变化）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 最近第7天被访问过的所有文件:</span></span><br><span class="line">find . -atime 7 -<span class="built_in">type</span> f -<span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 最近7天内被访问过的所有文件:</span></span><br><span class="line">find . -atime -7 -<span class="built_in">type</span> f -<span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询7天前被访问过的所有文件:</span></span><br><span class="line">find . -atime +7 <span class="built_in">type</span> f -<span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按大小搜索</span></span><br><span class="line"><span class="comment"># w字 k M G 寻找大于2k的文件:</span></span><br><span class="line">find . -<span class="built_in">type</span> f -size +2k</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除当前目录下所有的swp文件:</span></span><br><span class="line">find . -<span class="built_in">type</span> f -name <span class="string">"*.swp"</span> -delete</span><br><span class="line">find . -<span class="built_in">type</span> f -name <span class="string">"*.swp"</span> | xargs rm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行动作（强大的exec）</span></span><br><span class="line"><span class="comment"># 将当前目录下的所有权变更为weber:</span></span><br><span class="line">find . -<span class="built_in">type</span> f -user root -<span class="built_in">exec</span> chown weber &#123;&#125; \;</span><br><span class="line"><span class="comment"># &#123;&#125;是一个特殊的字符串，对于每一个匹配的文件，&#123;&#125;会被替换成相应的文件名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将找到的文件全都copy到另一个目录:</span></span><br><span class="line">find . -<span class="built_in">type</span> f -mtime +10 -name <span class="string">"*.txt"</span> -<span class="built_in">exec</span> cp &#123;&#125; OLD \;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要后续执行多个命令，可以将多个命令写成一个脚本。然后 -exec 调用时执行脚本即可:</span></span><br><span class="line">-<span class="built_in">exec</span> ./commands.sh &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<h3 id="grep-文本搜索"><a href="#grep-文本搜索" class="headerlink" title="grep 文本搜索"></a>grep 文本搜索</h3><p>常用参数</p>
<ul>
<li>-o 只输出匹配的文本行 VS -v 只输出没有匹配的文本行</li>
<li>-c 统计文件中包含文本的次数<br>  <code>grep -c “text” filename</code></li>
<li>-n 打印匹配的行号</li>
<li>-i 搜索时忽略大小写</li>
<li>-l 只打印文件名</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在多级目录中对文本递归搜索(程序员搜代码的最爱）:</span></span><br><span class="line">grep <span class="string">"class"</span> . -R -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配多个模式:</span></span><br><span class="line">grep -e <span class="string">"class"</span> -e <span class="string">"vitural"</span> file</span><br></pre></td></tr></table></figure>
<h2 id="关机"><a href="#关机" class="headerlink" title="关机"></a>关机</h2><p><a href="http://www.cnblogs.com/deeryao/archive/2010/09/10/1823665.html" target="_blank" rel="noopener">linux定时关机</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 立刻关机</span></span><br><span class="line">shutdown -h now</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在23点定时关机</span></span><br><span class="line">shutdown -h 23:00</span><br><span class="line"></span><br><span class="line"><span class="comment"># 延时关机sudo shutdown +minutes（这个加号不可省略，minutes表示分钟）</span></span><br><span class="line"><span class="comment"># 两小时候后关机</span></span><br><span class="line">shutdown -h +120</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消前一个关机命令按“Ctrl+C”键或输入命令：</span></span><br><span class="line">shutdown -c</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/A-Tutorial-Introduction-to-the-Lambda-Calculus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/A-Tutorial-Introduction-to-the-Lambda-Calculus/" class="post-title-link" itemprop="url">A Tutorial Introduction to the Lambda Calculus</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 01:10:47" itemprop="dateCreated datePublished" datetime="2019-04-28T01:10:47+08:00">2019-04-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">8k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">7 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul>
<li><a href="http://cgnail.github.io/academic/lambda-1/" target="_blank" rel="noopener">我的最爱Lambda演算——开篇</a></li>
<li><a href="https://www.inf.fu-berlin.de/lehre/WS03/alpi/lambda.pdf" target="_blank" rel="noopener">A Tutorial Introduction to the Lambda Calculus</a> 很不错的一篇入门参考</li>
<li><a href="http://palmstroem.blogspot.com/2012/05/lambda-calculus-for-absolute-dummies.html" target="_blank" rel="noopener">The Lambda Calculus for Absolute Dummies (like myself)</a> 基本是上一篇文章的理解和翻译，不过加入了很多理解，从我看过第一篇文章后，再看这篇会很容易接受</li>
<li><a href="https://zhuanlan.zhihu.com/p/30510749?utm_source=ZHShareTargetIDMore&amp;utm_medium=social&amp;utm_oi=898539620818640896" target="_blank" rel="noopener">认知科学家写给小白的Lambda演算</a> 这是上一篇文章的中文翻译</li>
<li><a href="https://www.cs.utah.edu/~mflatt/past-courses/cs7520/public_html/s06/notes.pdf" target="_blank" rel="noopener">Programming languages and lambda calculi</a> 参考书</li>
<li><a href="https://zhuanlan.zhihu.com/p/25771134" target="_blank" rel="noopener">Lambda calculus引论(三): 不可判定</a> 这是更为简洁的笔记介绍</li>
<li><a href="https://www.jianshu.com/p/e7db2f50b012" target="_blank" rel="noopener">神奇的λ演算</a> 另一个不错的入门介绍</li>
</ul>
<p>这里以第二篇开始lambda演算的学习<br>λ演算是一种形式系统(formal system)，什么是形式系统呢？大家都知道，数学语言是可以脱离现实而存在的——大家把数学想成了一种符号游戏，脱离生活常识，从公理开始，进行大量的推导和证明——最终产生了一个系统，在这个系统中有公理、定理、推论、猜想……这种自成系统，有公理又承认推理证明方法的体系，成为形式系统。而用于描述形式系统的语言就是形式语言(formal language)</p>
<h2 id="图灵完备"><a href="#图灵完备" class="headerlink" title="图灵完备"></a>图灵完备</h2><p>首先先理解一下什么是<strong>图灵完备</strong>，参考知乎的答案<a href="https://www.zhihu.com/question/20115374" target="_blank" rel="noopener"># 什么是图灵完备？</a></p>
<h3 id="什么是图灵机"><a href="#什么是图灵机" class="headerlink" title="什么是图灵机"></a>什么是图灵机</h3><p>图灵机是图灵在1936年发表的paper中提出的数学模型，是一个架空概念，他在文中描述了什么是图灵机，并且证明，<strong>只要图灵机可以被实现，就可以用来解决任何可计算问题</strong>。<br>图灵机的结构包括：</p>
<ol>
<li>一个无限长的纸带</li>
<li>一个字符表</li>
<li>一个读写头</li>
<li>一个状态寄存器</li>
<li>一个有限的指令集</li>
</ol>
<h3 id="图灵机可以解决什么问题"><a href="#图灵机可以解决什么问题" class="headerlink" title="图灵机可以解决什么问题"></a>图灵机可以解决什么问题</h3><p>图灵证明，假设上述模型所说的功能都可以被某种形式物理实现，那么任何可计算问题都可以被解决。<br>所谓可计算问题，涉及到计算理论（即泛指一切与计算相关的问题），可以理解为，<strong>是否存在一个算法，能解决在任何输入下的此计算问题</strong>，比如著名的停机问题，就是一个不可计算的计算问题。<br>简单所，图灵证明了对于一个问题，对于任何输入，只要人类可以保证算出结果，那么图灵机就可以保证计算结果。</p>
<h3 id="什么是图灵完备性"><a href="#什么是图灵完备性" class="headerlink" title="什么是图灵完备性"></a>什么是图灵完备性</h3><p>图灵完备性，是针对一套数据操作规则而言的概念，数据操作规则可以是一门编程语言，也可以是计算机里的实现的指令集。当这套规则可以实现图灵机模型里的全部功能时，就称为具备图灵完备性。</p>
<h3 id="直观理解图灵完备——Brainfuck语言"><a href="#直观理解图灵完备——Brainfuck语言" class="headerlink" title="直观理解图灵完备——Brainfuck语言"></a>直观理解图灵完备——Brainfuck语言</h3><p>1993年，有人发明了Brainfuck语言，只有8个有效字符，每个字符都是一个指令，但这却是一门图形完备的编程语言。<br>BF的工作机制与图灵机基本一致，他存储数据的方式是一个无限长的一位整数数组，里面的数值全部初始化为0，还有一个数据指针，每个时刻都指向数组的某一元素，指针可以左右移动，也可以读取、修改数组当前元素的值。<br>BF中8个有效字符分别是：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- &gt;</span><br><span class="line">指针向右移动一格</span><br><span class="line">- &lt;</span><br><span class="line">指针向左移动一格</span><br><span class="line">- +</span><br><span class="line">使指针当前格数值加一</span><br><span class="line">- -</span><br><span class="line">使指针当前格数值减一</span><br><span class="line">- .</span><br><span class="line">把当前格数值按 ASCII 表输出到终端</span><br><span class="line">- ,</span><br><span class="line">从终端接受一 byte 的数据，存储其 ASCII 数值到当前格</span><br><span class="line">- [</span><br><span class="line">当指针当前值为 0 时，程序跳转至与之对应的 ] 之后；否则程序正常执行</span><br><span class="line">- ]</span><br><span class="line">程序跳转回与之对应的 [ 处</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+++++</span><br><span class="line">[</span><br><span class="line">&gt;+++++++++++++</span><br><span class="line">&lt;-</span><br><span class="line">]</span><br><span class="line">&gt;.</span><br></pre></td></tr></table></figure>
<p>对于上述代码段，通过完成5X13输出了字符<code>A</code>,<br>这里讲一下我的理解，<code>+</code>进行五次，因此当前指针初始化的格子cell 0的值被递增了5次<br><code>[</code>指令读取到当前值各自值为5（因此将[]中的部分执行了5次，[]中的程序会递减该值，直到0），来看[]中的行为<br><code>&gt;</code>右移指针，随后将当前指针的各自cell 1递增了13次，再左移一个到cell 0，将cell 0的值递减一次<br>随后<code>&gt;.</code>右移指针并将当前值格子cell 1的值打印出来，得到<code>A</code></p>
<h3 id="图灵停机问题"><a href="#图灵停机问题" class="headerlink" title="图灵停机问题"></a>图灵停机问题</h3><p><strong>不存在有这样一个程序，能够计算任何程序在给定的输入上是否会结束（停机）。</strong><br>用反证法，假设有这样一个程序，叫做GodAlg，给定一个程序，并且给定这个程序的输入，就能够判定这个程序在这个输入上是否会停机。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">GodAlg</span><span class="params">(<span class="keyword">char</span> *program, <span class="keyword">char</span> *input)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (&lt;program&gt; halts on &lt;input&gt;)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们假设一个新的程序</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SatanAlg</span><span class="params">(<span class="keyword">char</span> *program)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (GodAlg(program, program)) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当这个算法调用自身时，SatanAlg(SatanAlg)会产生的结果如何？<br>从代码片段来看，这个程序要么能够结束运行停机，要不不能返回。</p>
<ol>
<li>假设能够停机，则if判断成立，程序进入循环，于是这个调用永远不会返回，说明SatanAlg(SatanAlg)不能停机。</li>
<li>假设不能够停机，则返回true，说明SatanAlg(SatanAlg)能停机。<br>这说明假设不成立，不存在这样的一个程序GodAlg</li>
</ol>
<h2 id="λ演算"><a href="#λ演算" class="headerlink" title="λ演算"></a>λ演算</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>λ演算被称为最小通用编程语言，1930年由Church引入，用于公式化有效计算中的一些问题，它也是图灵完备的，但更强调变换规则的使用，而不是具体的实现，并且其约束的规则非常简单，易于演算。<br>λ演算中只有三种表达式，分别如下。在λ演算中，只有λ和.是关键字。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- &lt;expression&gt;  := &lt;name&gt; | &lt;function&gt; | &lt;application&gt;</span><br><span class="line">- &lt;function&gt;    := λ &lt;name&gt;.&lt;expression&gt;</span><br><span class="line">- &lt;application&gt; := &lt;expression&gt;&lt;expression&gt;</span><br></pre></td></tr></table></figure>
<p>注意表达式可以是name，function和application，对于，在λ演算中，只有λ和.是关键字！<br>记住最后一个表达式，两个expression表示application。对于表达式，默认是从左到右进行分析或者应用应用的。</p>
<script type="math/tex; mode=display">
E_1E_2E_3\dots E_n=(((E_1E_2)E_3)\dots E_n)</script><p>最简单的恒等函数为</p>
<script type="math/tex; mode=display">
\lambda x.x</script><p>函数可以应用于表达式，例如下式表示将函数应用到$y$上</p>
<script type="math/tex; mode=display">
(\lambda x.x)y</script><p>关于function application可以通过替换规则替换body中的argument实现求值，例如</p>
<script type="math/tex; mode=display">
(\lambda x.x)y=[y/x]x=y</script><p>这里$[y/x]$表示将所有的$x$替换为$y$<br>λ演算中有α transform和β reduction，在λ演算中，变量是没有任何含义的，不代表任何东西，只是用先相同的名字表示两个相同的东西。而函数也什么都不计算，就是一个表达式，唯一能做的就是β规约(β reduction)，直到没有任何东西可以再替换为为止。</p>
<ul>
<li>α transform<br>对于λ演算中的任何表达式，可以修改函数参数的名称，只要同时修改函数体的内所有的引用。（替换有约束变量的名字）</li>
<li>β reduction<br>指的是，对于一个application，可以将函数体中和对应函数标识符相关的部分做替换来实现application，方法就是使用标识符作为参数值替换，也就是下面的substituions部分。（将实参应用到函数体中）</li>
</ul>
<h3 id="约束变量-bound-variable-和自由变量-free-variable-variable"><a href="#约束变量-bound-variable-和自由变量-free-variable-variable" class="headerlink" title="约束变量(bound variable)和自由变量(free variable variable)"></a>约束变量(bound variable)和自由变量(free variable variable)</h3><p><img src="https://pic2.zhimg.com/80/v2-8de07855e732abd5ff08a6c00b6a23dd_hd.jpg" alt><br>在头部(head)中提及的变量被成为约束变量，没有提到的成为自由变量，因为函数可以是其他函数的一部分，所以一个变量可以同时是约束变量，又是自由变量。</p>
<h3 id="substitutions"><a href="#substitutions" class="headerlink" title="substitutions"></a>substitutions</h3><p>由于在λ演算中当要使用一个函数时，都需要完整写出完整的定义，这里可以使用其他字符来代替定义，例如恒等function</p>
<script type="math/tex; mode=display">
I= (\lambda x.x)</script><p>当恒等function应用于本身时，可以表示为</p>
<script type="math/tex; mode=display">
II=(\lambda x.x)(\lambda x.x)</script><p>注意前后的$x$是互相独立的，上式可以写作</p>
<script type="math/tex; mode=display">
II=(\lambda x.x)(\lambda z.z)</script><p>对上式作变量替换，将所有$x$用$\lambda z.z$替换</p>
<script type="math/tex; mode=display">
[\lambda z.z/x] = \lambda z.z\equiv I</script><h3 id="算术"><a href="#算术" class="headerlink" title="算术"></a>算术</h3><p>λ演算最早就是应用于算术运算的，但在λ演算中只有函数，并没有所谓的数字，这里用丘齐数来表示，首先定义zero，然后one用suc(zero)表示，two用suc(suc(zero))表示。<br>zero表示为，需要接受两个参数s和z</p>
<script type="math/tex; mode=display">
\lambda s.(\lambda z.z)</script><p>可以简写为（λ演算中只定义了单个参数的函数，但是多个参数的函数无非就是单个函数的多次调用，其实就是柯里化）</p>
<script type="math/tex; mode=display">
0\equiv \lambda sz.z</script><p>简化后的式子可以接受两个参数，第一个可替换s，第二个可替换z。这个表达式被应用时，会把第一个表达式丢掉，然后第二个原封不动。<br>利用这个记号法，其他自然数可以定义为</p>
<script type="math/tex; mode=display">
\begin{aligned}
1 \equiv & \lambda sz.s(z) \\
2 \equiv & \lambda sz.s(s(z)) \\
3 \equiv &\lambda sz.s(s(s(z)))
\end{aligned}</script><p>以上的计数法其实就是在z之上嵌套表达式s，数字多大就嵌套多少次，就是对z应用了n次s。这其实就是自然数的本质，不断加1。<br>我们定义后继函数(successor function)如下</p>
<script type="math/tex; mode=display">
S =\lambda wyx.y(wyx)</script><p>后继函数可以应用于0得到</p>
<script type="math/tex; mode=display">
\begin{aligned}
S0 =& (\lambda wyx.y(wyx)) 0 \\
    =& \lambda yx.y(0yx) \\
    =& \lambda yx.y(x) \\
    = &1
\end{aligned}</script><p>同理可以得到2等等，由此即可得到加法的定义，例如2+3就表示2S3，即2 suc 3次。注意以下推导中，2接受两个参数S和3，分别将S和3作为s和z替换，同时也要注意到$S3=4$</p>
<script type="math/tex; mode=display">
\begin{aligned}
2S3\equiv & (\lambda sz.s(s(z))) S 3\\
=& S(S(3))\\
=& S(4) \\
=& 5
\end{aligned}</script><!-- 这部分有问题，需要重新看下其他文章
关于加法实际可以定义如下
$$
+\equiv \lambda szxy.sx(ysz) \equiv \lambda sz.()
$$
-->
<h3 id="柯里化-currying"><a href="#柯里化-currying" class="headerlink" title="柯里化(currying)"></a>柯里化(currying)</h3><p>这一块可以参考wiki的解释。柯里化就是把接受多个参数的函数变成接受一个单一函数（最初函数的第一个参数）的函数，并返回接受剩余参数的函数的新函数的技术。</p>
<p>举个例子很典型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">add(3, 5) -&gt; add(3)(5)</span><br></pre></td></tr></table></figure>
<p>0的定义为$\lambda sz.z$，这个其实是$\lambda s.(\lambda z.z)$是完全等价的。</p>
<h3 id="乘法-multiplication"><a href="#乘法-multiplication" class="headerlink" title="乘法(multiplication)"></a>乘法(multiplication)</h3><script type="math/tex; mode=display">
\lambda xyz.x(yz)</script><p>例如2x2的结果为如下，注意2是可以接受两个参数的，所以$2s(z)$实际上是2接受了$s$和$z$作为输入，得到s(s(z))</p>
<script type="math/tex; mode=display">
\begin{aligned}
(\lambda xyz.x(yz))23 &= (\lambda z. 2(3z)) \\
    &= \lambda z.(\lambda s.((3z)(((3z)(s))))) \\
    &= \lambda zs.((3z)(3zs))\\
    &= \lambda zs.3z(3zs) \\
    &= \lambda zs.z(z(z(3zs))) \\
    &= \lambda zs.z(z(z(z(z(z(s)))))) \\
    &= 6
\end{aligned}</script><p>时刻要记住每个应用函数时，接受了几个参数，并且是左结合的。</p>
<h2 id="条件-conditionals"><a href="#条件-conditionals" class="headerlink" title="条件(conditionals)"></a>条件(conditionals)</h2><p>定义以下两个函数为真和加，分别接受两个参数返回其中的一个，真就返回第一个，假就返回第二个</p>
<script type="math/tex; mode=display">
\mathrm{T} \equiv \lambda xy.x \\
\mathrm{F} \equiv \lambda xy.y</script><h3 id="逻辑运算-logical-operations"><a href="#逻辑运算-logical-operations" class="headerlink" title="逻辑运算(logical operations)"></a>逻辑运算(logical operations)</h3><script type="math/tex; mode=display">
\land \equiv \lambda xy.xy\mathrm{F}\\
\lor \equiv \lambda xy. x\mathrm{T}y \\
\lnot \equiv \lambda x.x\mathrm F \mathrm T \\</script><p>例如</p>
<script type="math/tex; mode=display">
\lnot \mathrm{T}=\mathrm T \mathrm F \mathrm T = \mathrm F</script><h3 id="条件测试-a-conditional-test"><a href="#条件测试-a-conditional-test" class="headerlink" title="条件测试(a conditional test)"></a>条件测试(a conditional test)</h3><p>定义一个函数，如果参数是数字0则返回T，否则返回F</p>
<script type="math/tex; mode=display">
\mathrm Z \equiv \lambda x.xF\lnot F</script><p>验证如下，注意0表示接受两个参数，然后用第一个参数对第二个参数作用0次</p>
<script type="math/tex; mode=display">
\mathrm{Z} = (\lambda x.x \mathrm F \lnot \mathrm F)0 = 0 \mathrm F \lnot \mathrm F = \lnot \mathrm F</script><script type="math/tex; mode=display">
\mathrm Z \mathrm N \equiv (\lambda x.x\mathrm F \lnot \mathrm F) \mathrm N = \mathrm N \mathrm F \lnot \mathrm F</script><p><strong>注意到，F对任何参数的应用都是返回恒等函数</strong></p>
<script type="math/tex; mode=display">
\mathrm F a \equiv (\lambda xy.y)a = \lambda y.y= \mathrm I</script><p>因此，上式继续展开为</p>
<script type="math/tex; mode=display">
\mathrm N \mathrm F \lnot \mathrm F = \mathrm I \mathrm F =\mathrm F</script><p>另外可以换一种方式理解，$\mathrm N \mathrm F \lnot \mathrm F $同时也表示对对$\lnot $应用n次$\mathrm F$，然后结果再应用于$\mathrm F $。注意到$\mathrm F $的定义，接受两个参数，仅仅返回第二个参数。第一个$\mathrm F $实际接受了两个参数，一个是对$\lnot$应用了n-1次F的返回值，另一个是后面的一个$\mathrm F $，因此抹掉第一个参数返回第二个参数，也就是返回最后面的那个$\mathrm F $，也就是最后就返回$\mathrm F $。</p>
<h3 id="前继函数-predecessor-function"><a href="#前继函数-predecessor-function" class="headerlink" title="前继函数(predecessor function)"></a>前继函数(predecessor function)</h3><p>对于n的前继，通用的做法是创建一个序对(pair)，(n,n-1)然后返回需对的第二个参数作为结果。序对用λ演算可以表示为</p>
<script type="math/tex; mode=display">
\lambda z.zab</script><p>将该函数应用于$\mathrm T$就可以返回序对的第一个数</p>
<script type="math/tex; mode=display">
(\lambda z.zab)\mathrm T= \mathrm T ab=a</script><p>同理，应用于$\mathrm F$就可以返回需对的第二个数</p>
<script type="math/tex; mode=display">
(\lambda z.zab)\mathrm F= \mathrm F ab=b</script><p>利用下面这个函数就可以由序对(n,n-1)生成(n+1,n-1)</p>
<blockquote>
<p>这里感觉应该是由序对(n,n-1)生成(n+1,n)才对啊！</p>
</blockquote>
<script type="math/tex; mode=display">
\Theta \equiv (\lambda pz.z(S(pT))(pT))</script><blockquote>
<p>注意一下对上式的理解，在函数体z(S(pT))(pT))中，如果没有对z进行规约，则该式子不会进行任何计算；如果用数字n对z进行规约，变成n(S(pT))(pT)，此时才可以进一步进行参数替换S(pT)作为n的第一个参数，pT作为第二个参数。</p>
</blockquote>
<p>其中，子表达式$pT$从序对p中提取第一个元素。上式会构造一个新的序对，第一个元素是原序对第一个元素的后继——S(pT)，第二个元素就是第原序对的第一个元素——pT。</p>
<blockquote>
<p>简单来说，应该是由序对(a,b)生成(a+1,a)。</p>
</blockquote>
<p>因此n的前继就是应用n次$\Theta$到序对$\lambda z.z00$（得到(n,n-1)）然后返回第二个参数得到n-1：</p>
<script type="math/tex; mode=display">
P\equiv \lambda n.n\Theta (\lambda z.z00)\mathrm F</script><p>可以我们可以进行推导</p>
<script type="math/tex; mode=display">
\begin{aligned}
P2=&2\Theta(\lambda z.z00)F\\
=& \Theta(\Theta(\lambda z.z00))F\\
=& \Theta(\Theta(\lambda p.p00))F\\
=& \Theta(\lambda z.z10)F \\
=& (\lambda z.z21)F\\
=& F21 \\
=& 1
\end{aligned}</script><p>以此类推。同时要注意到$P0=0$，该性质对其他函数的定义很有用，验证如下</p>
<script type="math/tex; mode=display">
P0=0\Theta(\lambda z.z00)F=(\lambda z.z00)F=F00=0</script><h3 id="相等与不等"><a href="#相等与不等" class="headerlink" title="相等与不等"></a>相等与不等</h3><p>定义如下函数判断数字$x$是否大于等于$y$</p>
<script type="math/tex; mode=display">
G\equiv (\lambda xy.Z(xPy))</script><p>这里的$xPy$表示对y应用x次的前继，也就是y-x，如果该式等于0，说明$y \le x$。<br>利用$x \ge y$与$y \ge x$同时成立表示$x=y$，可以得到下面这个关于相等的定义</p>
<script type="math/tex; mode=display">
E\equiv (\lambda xy.\land(ZxPy)(Z(yPx)))</script><p>用同样的方式我们也可以定义$x<y$，$x>y$和$x\neq y$。</y$，$x></p>
<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>在λ演算中，递归函数可以定义为调用函数y并且返回自身</p>
<script type="math/tex; mode=display">
Y\equiv (\lambda y.(\lambda x.y(xx))(\lambda x.y(xx)))</script><p>注意这里其实是加括号了，完整表示如下</p>
<script type="math/tex; mode=display">
Y\equiv (\lambda y.((\lambda x.y(xx))(\lambda x.y(xx))))</script><p>这里第二个$(\lambda x.y(xx))$是规约到第一个约束变量x中去的还是不会减少表达式的个数，<br>该函数应用于R时</p>
<script type="math/tex; mode=display">
YR=(\lambda x.R(xx))(\lambda x.R(xx))= R((\lambda x.R(xx))(\lambda x.R(xx)))=R(YR)</script><p>考虑从0到n的求和函数R</p>
<script type="math/tex; mode=display">
R\equiv (\lambda rn.Zn0(n(r(Pn))))</script><p>该函数对n进行了测试，如果n为0的话，就返回0；如果n不为0则返回n+(r(n-1))，这里r其实是对自身函数的调用。这里我们怎么知道r是对自身的递归调用呢？在λ演算中我们没有对函数定义名字的。这就是给出递归操作Y的原因，例如求和到3</p>
<script type="math/tex; mode=display">\begin{aligned}
YR3= &R(YR)3\\
    =& Z30(3S(YR(P3))) \\
    =& 3S(YR2)\\
    =&3S2S1S0
    =6
\end{aligned}</script><p>这就是Y组合子(Y combinator)!</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/27/ffmpeg/ffmpeg常用命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/27/ffmpeg/ffmpeg常用命令/" class="post-title-link" itemprop="url">ffmpeg常用命令</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-27 18:25:49" itemprop="dateCreated datePublished" datetime="2019-04-27T18:25:49+08:00">2019-04-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">5.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">5 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>记录下工作中常用的ffmpeg命令，有些网络上不好查找到，需要总结。用md不知道怎么排版比较合适</p>
<hr>
<h2 id="1-编码"><a href="#1-编码" class="headerlink" title="1. 编码"></a>1. 编码</h2><p>u_p444_b10的YUV→100M的YUV420的24fps的HDR10码流（单帧，每帧YUV重复2秒）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># u_p444_b10的YUV→100M的YUV420的24fps的HDR10码流（单帧，每帧YUV重复2秒）</span></span><br><span class="line"><span class="comment"># "如果要非单帧的，将前面一个""-r 0.5""去掉即可；重复10s，用""""-r 0.1""""；如果yuv仅有一帧，编码会有错误，所以至少2帧进行repeat"""</span></span><br><span class="line">ffmpeg -threads 16 -r 0.5 -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -b:v 100M -vf scale=out_h_chr_pos=0:out_v_chr_pos=0,format=yuv420p10 -c:v libx265 -preset ultrafast -x265-params <span class="string">"keyint=24:colorprim=bt2020:transfer=smpte2084:colormatrix=bt2020nc:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(10000000,50):max-cll=0,0"</span> -an -y -r 24 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># u_p444_b10的YUV→100M的YUV420的24fps的SDR码流（单帧，每帧YUV重复2秒）</span></span><br><span class="line">ffmpeg -threads 16 -r 0.5 -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -b:v 100M -vf scale=out_color_matrix=bt709:out_h_chr_pos=0:out_v_chr_pos=0,format=yuv420p10 -c:v libx265 -preset ultrafast -x265-params <span class="string">"colorprim=bt709:transfer=bt709:colormatrix=bt709"</span> -an -y -r 24 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># u_p444_b10的YUV→100M的YUV420的24fps的HLG码流（单帧，每帧YUV重复2秒）</span></span><br><span class="line">ffmpeg -threads 16 -r 0.5 -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -b:v 100M -vf scale=out_h_chr_pos=0:out_v_chr_pos=0,format=yuv420p10 -c:v libx265 -preset ultrafast -x265-params <span class="string">"keyint=24:colorprim=bt2020:transfer=arib-std-b67:colormatrix=bt2020nc"</span> -an -y -r 24 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># u_p420_b8的YUV→100M的YUV420p10的24fps的SDR码流（单帧，每帧YUV重复2秒）</span></span><br><span class="line">ffmpeg -threads 16 -r 0.5 -s 1920x1080 -pix_fmt yuv420p -i input.yuv -b:v 100M -s 3840x2160 -vf scale=out_color_matrix=bt709:out_h_chr_pos=0:out_v_chr_pos=0,format=yuv420p10 -c:v libx265 -preset ultrafast -x265-params <span class="string">"colorprim=bt709:transfer=bt709:colormatrix=bt709"</span> -an -y -r 24 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 720x480_p422_b8的YUV→100M的YUV422p8的24fps的SDR码流（单帧，每帧YUV重复2秒）</span></span><br><span class="line"><span class="comment"># 一帧即可完成，但是V811不支持这个格式，需要更换编码库</span></span><br><span class="line">ffmpeg -threads 16 -r 0.2 -s 720x480 -pix_fmt yuv422p -i input.yuv -b:v 100M -c:v libx265 -preset ultrafast -x265-params -an -y -r 24 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 720x480_p422_b8的YUV→100M的YUV422p8的24fps的SDR码流（单帧，每帧YUV重复10秒）</span></span><br><span class="line"><span class="comment"># 注意至少需要两帧，但第二帧不会被repeated，总共只有10这里采用MPEG4编码库，不知道为何X265时V811支持不了</span></span><br><span class="line">ffmpeg -r 0.1 -s 720x480 -pix_fmt yuv422p -i input.yuv -b:v 100M -vcodec mpeg4 -an -y -r 24 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编码时重新添加旋转的metadata</span></span><br><span class="line">ffmpeg -I input.mp4 -c copy -metadata:s:v:0 rotate=90 output.mp4</span><br></pre></td></tr></table></figure>
<h2 id="2-解码"><a href="#2-解码" class="headerlink" title="2. 解码"></a>2. 解码</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接解码出YUV444的码流</span></span><br><span class="line">ffmpeg -i input.mp4 -pix_fmt yuv444p10 -y output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解码YUV444的码流，并指定30帧和分辨率</span></span><br><span class="line">ffmpeg -i input.mp4 -frames:v 30 -pix_fmt yuv444p10 -s 3840x2160 -y output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解码YUV444的码流，并指定时间段和分辨率</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:54 -t 00:00:10 -pix_fmt yuv444p10 -s 3840x2160 -y output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将码流分段解出yuv，每段持续2秒，总共最多解500帧，指定输出分辨率为f_p444_b10</span></span><br><span class="line"><span class="comment"># （ 注意直接使用命令行时用一个""%""，在脚本中要转义用""%%""）"</span></span><br><span class="line">ffmpeg -i input.mp4 -frames:v 500 -pix_fmt yuv444p10 -s 1920x1080 -f segment -segment_time 2 -y output_%%04d.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从制定时间开始截取一帧，并制定分辨率和格式</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:54 -frames:v 1 -pix_fmt yuv444p10 -s 3840x2160 -y output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解码时进行反交错deinterlace（有两种方法，但是主观效果差异应该不大）</span></span><br><span class="line">ffmpeg -i input.mp4 -deinterlace -pix_fmt yuv444p10 output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 缩放</span></span><br><span class="line">ffmpeg -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -vf scale=iw*2:ih*2 output.yuvffmpeg -i input.jpg -vf scale=iw*w:ih*2 output.jpg</span><br><span class="line">ffmpeg -i input.avi -vf scale=320:240 output.avi</span><br><span class="line">ffmpeg -i input.avi -vf scale=320:-1 otuput.avi</span><br><span class="line">ffmpeg -i input.avi -vf <span class="string">"scale=iw/2:ih/2"</span> output.avi</span><br><span class="line">ffmpeg -s 1920x1080 -pix_fmt yuv444p10 -i input.yuv -vf scale=iw*2:ih*2 output.yuv</span><br><span class="line">ffmpeg -s 1920x1080 -pix_fmt gray10 -i input.yuv -vf scale=iw*2:ih*2 output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解YUV4448bit</span></span><br><span class="line">ffmpeg -i input.mp4 -pix_fmt yuv444p -y output.yuv</span><br></pre></td></tr></table></figure>
<h2 id="3-拼接"><a href="#3-拼接" class="headerlink" title="3. 拼接"></a>3. 拼接</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将多段ts流拼接</span></span><br><span class="line">ffmpeg -i concat:<span class="string">"u_r24_sdr_bt709.ts|u_r24_sdr_bt2020.ts|u_r24_sdr_pq.ts|u_r24_sdr_hdr10.ts|u_r24_sdr_hlg10.ts"</span> -c copy -an -y u_r24_b10_sscimf.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同时拼接4路；做8K用</span></span><br><span class="line">ffmpeg -i 1.mp4 -i 2.mp4 -i 3.mp4 -i 4.mp4 -filter_complex <span class="string">"[0:v]pad=iw*2:ih*2[a];[a][1:v]overlay=w[b];[b][2:v]overlay=0:h[c];[c][3:v]overlay=w:h"</span> out.mp4</span><br></pre></td></tr></table></figure>
<h2 id="4-截取"><a href="#4-截取" class="headerlink" title="4. 截取"></a>4. 截取</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 从指定时间开始截取一段码流</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:05.2 -t 00:00:10 -c copy output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从指定时间开始截取一帧</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:05 -frames:v 1 -pix_fmt yuv444p10 -y output.yuv</span><br></pre></td></tr></table></figure>
<h2 id="5-转码-scaler"><a href="#5-转码-scaler" class="headerlink" title="5. 转码/scaler"></a>5. 转码/scaler</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将码流转码成420p10</span></span><br><span class="line">ffmpeg -i input.mp4 -vf format=yuv420p10 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将码流转码成fhd</span></span><br><span class="line">ffmpeg -i input.mp4 -vf scale=1920:1080 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将码流转码成uhd</span></span><br><span class="line"><span class="comment"># 但是HDR的metadata会丢失掉</span></span><br><span class="line">ffmpeg -i input.mp4 -vf scale=3840:2160 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新拷贝音视频流，可修复视频时间戳不正确等问题</span></span><br><span class="line">ffmpeg -i input.mp4 -c:v copy -c:a copy output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将UHD YUV转成FHD YUV</span></span><br><span class="line">ffmpeg -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -vf scale=1920:1080 -pix_fmt yuv444p10 output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将UHD YUV444转成V210；"跟scalar效果基本一致，UV的值略偏右，目前没有看出来差异"</span></span><br><span class="line">ffmpeg -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -vcodec v210 output.yuv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将V210转成YUV444 FHD</span></span><br><span class="line"><span class="comment"># 5529600刚好是一帧V210格式的大小，可能与标准的YUV422计算有一定的偏差，因为可能有偏移或者头 https://trac.ffmpeg.org/ticket/1869</span></span><br><span class="line">ffmpeg -f image2pipe -vcodec v210 -s 1920x1080 -frame_size 5529600 -i 1920x1080_ducks_v210.yuv</span><br></pre></td></tr></table></figure>
<h2 id="6-其他"><a href="#6-其他" class="headerlink" title="6. 其他"></a>6. 其他</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># "将u_p444_b10的yuv图像以50M的码率编成420的1fps的SDR码流</span></span><br><span class="line"><span class="comment"># 5秒对应1帧原图，改变了帧率，STB播放异常，但是编码速度较快）</span></span><br><span class="line">ffmpeg -threads 16 -r 0.2 -s 3840x2160 -pix_fmt yuv444p10 -i input.yuv -b:v 50M -vf scale=out_color_matrix=bt709:out_h_chr_pos=0:out_v_chr_pos=0,format=yuv420p10 -c:v libx265 -preset medium -x265-params  <span class="string">"colorprim=bt709:transfer=bt709:colormatrix=bt709"</span> -an -y -r 1 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># "将u_p444_b10的yuv图像以近无损方式编成10bit420的24fps的SDR码流（pq=0）</span></span><br><span class="line"><span class="comment"># 不过码流通常会过高，可能达到400M，一般不可行"""</span></span><br><span class="line">ffmpeg -threads 16 -pix_fmt yuv444p10 -s 3840x2160 -r 24 -i input.yuv -vf scale=out_h_chr_pos=0:out_v_chr_pos=0,format=yuv420p10 -c:v libx265 -preset medium -x265-params qp=0:keyint=24:colorprim=bt709:transfer=bt709:colormatrix=bt709 -an -y otuput.mp4</span><br></pre></td></tr></table></figure>
<h2 id="7-备注"><a href="#7-备注" class="headerlink" title="7. 备注"></a>7. 备注</h2><ol>
<li>在编码的时候如果指定-preset ultrafast则速度会比-preset medium快不少，大约只要1/3的时间（单帧编码测试结果）。官方文档表示图像质量是一致的，文件大小有差异，但实测文件大小差异不大</li>
</ol>
<h2 id="8-ffprobe"><a href="#8-ffprobe" class="headerlink" title="8. ffprobe"></a>8. ffprobe</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取帧数（速度很慢，需要解出来才能获取）</span></span><br><span class="line">ffprobe -v error -count_frames -select_streams v:0 -show_entries stream=nb_read_frames -of default=nokey=1:noprint_wrappers=1 input.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 说是上面一个方法的快速版本，直接查询容器</span></span><br><span class="line">ffprobe -v error -count_frames -select_streams v:0 -show_entries stream=nb_frames -of default=nokey=1:noprint_wrappers=1 input.mp4</span><br></pre></td></tr></table></figure>
<h2 id="9-mediainfo"><a href="#9-mediainfo" class="headerlink" title="9. mediainfo"></a>9. mediainfo</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取帧数（速度比ffprobbe快很多）</span></span><br><span class="line">mediainfo --Output=<span class="string">"Video;%FrameCount%"</span> input.mp4</span><br></pre></td></tr></table></figure>
<h2 id="10-ref"><a href="#10-ref" class="headerlink" title="10. ref"></a>10. ref</h2><ul>
<li><a href="https://www.cnblogs.com/wolf-song/p/7708364.html" target="_blank" rel="noopener">多个视频文件合成画中画效果（Python、ffmpeg）</a></li>
<li><a href="https://blog.csdn.net/weiwen12138/article/details/70344681" target="_blank" rel="noopener">ffmpeg 命令行实现多路视频拼接播放</a>]</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/27/git使用小记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/27/git使用小记/" class="post-title-link" itemprop="url">git使用小记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-27 11:06:09" itemprop="dateCreated datePublished" datetime="2019-04-27T11:06:09+08:00">2019-04-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-19 11:37:21" itemprop="dateModified" datetime="2021-12-19T11:37:21+08:00">2021-12-19</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">5.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">5 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="https://github.com/hongiii/gitNotes_from_Liao" target="_blank" rel="noopener">gitNotes_from_Liao</a></li>
<li><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">廖雪峰的Git教程</a></li>
</ul>
<p>记录git使用过程的一些问题和方法。</p>
<h2 id="集中式VS分布式版本控制系统"><a href="#集中式VS分布式版本控制系统" class="headerlink" title="集中式VS分布式版本控制系统"></a>集中式VS分布式版本控制系统</h2><p>集中式版本管理系统，版本库是集中在中央服务器的，需要先从中央服务器同步下来，然后再推送回去，因此必须联网才能工作。而分布式版本控制系统则没有中央服务器，每个人的电脑上都是一个完整的版本库，因此工作的时候不需要联网，需要协作的时候只需要将相互的修改推动给对方，互相就可以看到修改了。<br>因此两者之间的历史版本维护位置不同，Git本地库包含了代码库还有历史库，在本地就可以记录历史，而SVN的历史库位于中央仓库，每次对比和提交代码都必须链接到中央库。<br>由于每个人的电脑都有完整的版本库，因此其安全性很高，某一个人的电脑坏了无关紧要。当然实际使用的时候，很少是是两个人之间的进行版本库的推送，一般也有一台机器充当中央服务器，该服务器的作用仅仅是用来方便大家之间的交流。</p>
<h2 id="本地和远程同步"><a href="#本地和远程同步" class="headerlink" title="本地和远程同步"></a>本地和远程同步</h2><p>本地库要推送到远端，但这两个git库不相关，例如已有本地库，然后github上又新建了项目</p>
<ul>
<li><a href="https://blog.csdn.net/guotingting923/article/details/80162896" target="_blank" rel="noopener">上传本地项目到github远程仓库</a></li>
<li><a href="https://www.centos.bz/2018/03/git-%E5%87%BA%E7%8E%B0-fatal-refusing-to-merge-unrelated-histories-%E9%94%99%E8%AF%AF/" target="_blank" rel="noopener">git 出现 fatal: refusing to merge unrelated histories 错误</a></li>
<li><a href="https://www.jianshu.com/p/71e8dbd14b30" target="_blank" rel="noopener">GitHub使用部分—本地库和远程库之间的同步</a></li>
</ul>
<p>方法一<br>可以先将远程库拉下来，然后再将本地的代码拷贝到远端库下载到本地库，然后在提交，这样相当于一次update。不过这样子不能记录原有的git记录</p>
<p>方法二<br>强制关联推送</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 本地先正常init、add和commit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关联远程库</span></span><br><span class="line">$ git remote add origin https://github.com/AstrayWu/utils_python.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果远端库已经存在，则进行删除再关联</span></span><br><span class="line">$ git remote rm origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用--allow-unrelated-hisotries进行强制关联</span></span><br><span class="line">$ git pull origin master --allow-unrelated-hisotries</span><br><span class="line"></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<h2 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h2><ul>
<li><a href="https://www.yiibai.com/git/git_push.html" target="_blank" rel="noopener">git push命令 - 易百教程</a> </li>
<li><a href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">2.5 Git 基础 - 远程仓库的使用</a></li>
<li><a href="https://www.cnblogs.com/qianqiannian/p/6008140.html" target="_blank" rel="noopener">Git push 常见用法</a></li>
</ul>
<p>用<code>git remote</code>查看配置的远程库名字，一般<code>origin</code>是Git克隆的远程仓库服务器的默认名字。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ git remote <span class="comment"># 查看配置的远程库名字</span></span><br><span class="line">$ git remote -v <span class="comment"># 显示对应的URL</span></span><br><span class="line">$ git remote add &lt;shortname&gt; &lt;url&gt; <span class="comment"># 添加远程库并制定简称</span></span><br><span class="line">$ git remote add pb https://github.com/paulboone/ticgit</span><br><span class="line">$ git remote add pb git@github.com:paulboone/ticgit.git</span><br><span class="line">$ git remote -v</span><br><span class="line">$ git fetch [remote-name] <span class="comment"># 有了简写后就可以用简写代替远程库的名字</span></span><br><span class="line">$ git push [remote-name] [branch-name]</span><br><span class="line">$ git push -u origin master 第一次同步时使用该命令</span><br><span class="line">$ git push origin master</span><br><span class="line">origin https://github.com/schacon/ticgit (fetch)</span><br><span class="line">origin https://github.com/schacon/ticgit (push)</span><br><span class="line">pb https://github.com/paulboone/ticgit (fetch)</span><br><span class="line">pb https://github.com/paulboone/ticgit (push)</span><br></pre></td></tr></table></figure>
<p><code>git push</code>的用法为，冒号后面直接加远程分支名：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br></pre></td></tr></table></figure>
<p>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。下面命令表示删除origin主机的master分支。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git push origin :master</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line">git push origin --delete master</span><br></pre></td></tr></table></figure>
<p>如果当前分支与多个主机存在追踪关系，则可以使用<code>-u</code>选项指定一个默认主机，这样后面就可以不加任何参数使用<code>git push</code>。下面命令将本地的master分支推送到origin主机，同时指定origin为默认主机，后面就可以不加任何参数使用<code>git push</code>了。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<h2 id="工作区、暂存区和版本库"><a href="#工作区、暂存区和版本库" class="headerlink" title="工作区、暂存区和版本库"></a>工作区、暂存区和版本库</h2><p>工作区：在电脑里能看到的目录； 版本库：在工作区有一个隐藏目录.git，是Git的版本库。 Git的版本库中存了很多东西，其中最重要的就是称为stage（或者称为index）的暂存区，还有Git自动创建的master，以及指向master的指针HEAD。<br><img src="/2019/04/27/git使用小记/2019-04-28-00-01-11.png" alt="工作区、暂存区和版本库"><br>进一步解释一些命令：<br><code>git add</code>实际上是把文件添加到暂存区<br><code>git commit</code>实际上是把暂存区的所有内容提交到当前分支</p>
<h2 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h2><p>查看修改内容</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git diff <span class="comment"># 可以查看工作区(work dict)和暂存区(stage)的区别</span></span><br><span class="line">git diff --cached <span class="comment"># 可以查看暂存区(stage)和分支(master)的区别</span></span><br><span class="line">git diff HEAD -- &lt;file&gt; <span class="comment"># 可以查看工作区和版本库里面最新版本的区别</span></span><br></pre></td></tr></table></figure>
<h2 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h2><p>查看提交日志</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline <span class="comment"># 简化日志输出信息</span></span><br></pre></td></tr></table></figure>
<h2 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h2><p>查看命令历史</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure>
<h2 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h2><ul>
<li><a href="https://cloud.tencent.com/developer/article/1358036" target="_blank" rel="noopener">Git Reset命令- 腾讯云</a></li>
</ul>
<p>版本回退<br>返回上一个版本，在Git中，用<code>HEAD</code>表示当前版本，上一个版本就是<code>HEAD^</code>，上上一个版本是HEAD^^，往上100个版本写成<code>HEAD~100</code>。commit_id是版本号，是一个用SHA1计算出的序列</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure>
<ul>
<li><code>git reset --soft HEAD^</code>：将最近一次提交节点的提交记录回退到暂存区</li>
<li><code>git reset --mixed HEAD^</code>：将最近一次提交节点的提交记录回退到工作区</li>
<li><code>git reset --hard HEAD^</code>：将最近一次提交节点的提交记录全部清除</li>
</ul>
<p>eg：<br>在Master分支中，首先通过<code>git add test.txt</code>将test.txt文件添加到暂存区，再通过<code>git commit -m &quot;add file test.txt &quot;</code>将暂存区的内容作为一次提交记录添加到提交区，最后如果没问题的话就可以通过<code>git push origin master</code>将这次提交push到远端仓库。</p>
<p>使用</p>
<ol>
<li><p>修改commit的message，有点类似<code>amend</code>操作<br> 如果此时发现提交记录的comment写错了，如将<code>git commit -m &quot;add file test.txt&quot;</code>写成了<code>git commit -m &quot;ad file test.txt&quot;</code>，那么就可以使用    <code>git reset --soft HEAD^</code>将本次提交回退到暂存区，再重新把comment补全，进行一次提交。</p>
</li>
<li><p>修改commit的文件<br>如果此时发现提交记录里有一个文件多提交了，或者有一个文件漏添加到暂存区而没有在此次提交内，则可以通过<code>git reset --mixed HEAD^</code>将本次提交都回退到没有添加到暂存区之前，然后再重新add需要提交的文件后，再重新add</p>
</li>
<li><p>完全撤销此次commit<br>如果此时发现修复一个BUG完全错了，希望取消这次提交，并且把代码回退到没有改动的话，则需要使用<code>git reset --hard HEAD^</code>，来将这次提交全部回退。</p>
</li>
</ol>
<h2 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h2><h3 id="丢弃工作区的修改"><a href="#丢弃工作区的修改" class="headerlink" title="丢弃工作区的修改"></a>丢弃工作区的修改</h3><p>该命令是指将文件在工作区的修改全部撤销，这里有两种情况：</p>
<ol>
<li>file自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</li>
<li>file已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。<br>总之，就是让这个文件回到最近一次git commit或git add时的状态。也就是将工作区的状态回退到暂存区或者版本库。</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git checkout -- &lt;file&gt;</span><br></pre></td></tr></table></figure>
<h3 id="丢弃暂存区的修改"><a href="#丢弃暂存区的修改" class="headerlink" title="丢弃暂存区的修改"></a>丢弃暂存区的修改</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git reset HEAD &lt;file&gt; <span class="comment"># 第一步，把暂存区的修改撤销掉(unstage)，重新放回工作区：</span></span><br><span class="line">git checkout -- &lt;file&gt; <span class="comment"># 第二步，撤销工作区的修改</span></span><br></pre></td></tr></table></figure>
<p>小结：</p>
<ol>
<li>当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- &lt;file&gt;</code>。</li>
<li>当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD &lt;file&gt;</code>，就回到了第一步，第二步按第一步操作。</li>
<li>已经提交了不合适的修改到版本库时，想要撤销本次提交，进行版本回退，前提是没有推送到远程库。</li>
</ol>
<h2 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h2><p>删除文件</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git rm &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以上等价于，注意是提交到暂存区</span></span><br><span class="line">rm &lt;file&gt;</span><br><span class="line">git add &lt;file&gt;</span><br></pre></td></tr></table></figure>
<p>进一步的解释<br>Q: 比如执行了rm text.txt 误删了怎么恢复？<br>A: 执行<code>git checkout -- text.txt</code> 把版本库的东西重新写回工作区就行了</p>
<p>Q: 如果执行了<code>git rm text.txt</code>我们会发现工作区的text.txt也删除了，怎么恢复？<br>A: 先撤销暂存区修改，重新放回工作区，然后再从版本库写回到工作区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git reset head text.txt</span><br><span class="line">git checkout -- text.txt</span><br></pre></td></tr></table></figure>
<h2 id="远程库"><a href="#远程库" class="headerlink" title="远程库"></a>远程库</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"youremail@example.com"</span> <span class="comment"># 创建SSH Key</span></span><br><span class="line">git remote add origin https://github.com/username/repositoryname.git <span class="comment"># 关联远程仓库</span></span><br><span class="line">git push -u origin master <span class="comment"># 第一次推送到远程仓库，后续可以省略-u</span></span><br><span class="line"></span><br><span class="line">git remote -v <span class="comment"># 查看远程库信息</span></span><br></pre></td></tr></table></figure>
<h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><ul>
<li><a href="https://www.yiibai.com/git/git_pull.html" target="_blank" rel="noopener">git pull命令</a></li>
</ul>
<p>git pull命令用于从另一个存储库或本地分支获取并集成(整合)。git pull命令的作用是：取回远程主机某个分支的更新，再与本地的指定分支合并，它的完整格式稍稍有点复杂。</p>
<p>语法的位置和push有点不同，远程主机名在最前，然后push是本地→到远端，pull是远端→本地。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span><br></pre></td></tr></table></figure>
<p>如要要取回origin主机的next分支，与本地的master分支合并，需要写成下面这样：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git pull origin next:master</span><br></pre></td></tr></table></figure>
<p>如果远程分支(next)要与当前分支合并，则冒号后面的部分可以省略。上面命令可以简写为：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git pull origin next</span><br></pre></td></tr></table></figure>
<p>上面命令表示，取回origin/next分支，再与当前分支合并。实质上，这等同于先做git fetch，再执行git merge。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git fetch origin</span><br><span class="line">git merge origin/next</span><br></pre></td></tr></table></figure>
<h3 id="fetch和-pull的区别"><a href="#fetch和-pull的区别" class="headerlink" title="fetch和 pull的区别"></a>fetch和 pull的区别</h3><ul>
<li><a href="https://www.yiibai.com/git/git_pull.html" target="_blank" rel="noopener">git pull命令</a></li>
</ul>
<p>一般使用pull会简单些，不过可能要解决冲突</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git pull <span class="comment"># 相当于是从远程获取最新版本并merge到本地</span></span><br><span class="line">git fetch <span class="comment"># 相当于是从远程获取最新版本到本地，不会自动merge</span></span><br></pre></td></tr></table></figure>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git branch &lt;branchname&gt; <span class="comment"># 创建分支</span></span><br><span class="line">git branch <span class="comment"># 列出所有分支，当前分支前面会标一个*号。</span></span><br><span class="line">git checkout &lt;branchname&gt; <span class="comment"># 切换分支</span></span><br><span class="line">git checkout -b &lt;branchname&gt; <span class="comment"># 创建+切换分支</span></span><br><span class="line">git merge &lt;branchname&gt; <span class="comment"># 合并某分支到当前分支</span></span><br><span class="line">git branch -d &lt;branchname&gt; <span class="comment"># 删除分支</span></span><br><span class="line">git <span class="built_in">log</span> --graph <span class="comment"># 查看分支合并图</span></span><br><span class="line">git merge --no-ff -m <span class="string">"description"</span> &lt;branchname&gt; <span class="comment"># 普通模式合并分支</span></span><br><span class="line"><span class="comment"># 因为本次合并要创建一个新的commit，所以加上-m参数，把commit描述写进去。合并分支时，加上--no-ff参数就可以用普通模式合并，能看出来曾经做过合并，包含作者和时间戳等信息，而fast forward合并就看不出来曾经做过合并。</span></span><br><span class="line"></span><br><span class="line">git branch -D &lt;branchname&gt; <span class="comment"># 丢弃一个没有合并过的分支</span></span><br></pre></td></tr></table></figure>
<h2 id="reflog"><a href="#reflog" class="headerlink" title="reflog"></a>reflog</h2><ul>
<li><a href="https://blog.csdn.net/u013252047/article/details/80230781" target="_blank" rel="noopener">git命令log与reflog的比较</a></li>
</ul>
<p>git log 命令可以显示所有提交过的版本信息；git log 命令可以显示所有提交过的版本信息</p>
<h2 id="现场"><a href="#现场" class="headerlink" title="现场"></a>现场</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git stash <span class="comment"># 保存工作现场</span></span><br><span class="line">git stash list <span class="comment"># 查看工作现场</span></span><br><span class="line">git stash pop <span class="comment"># 恢复工作现场</span></span><br></pre></td></tr></table></figure>
<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><p>tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git tag &lt;tagname&gt; <span class="comment"># 用于新建一个标签，默认为HEAD，也可以指定一个commit id。</span></span><br><span class="line">git tag -a &lt;tagname&gt; -m &lt;description&gt; &lt;branchname&gt; or commit_id <span class="comment"># 指定标签信息</span></span><br><span class="line">git tag <span class="comment"># 查看所有标签</span></span><br><span class="line">git push origin &lt;tagname&gt; <span class="comment"># 推送一个本地标签</span></span><br><span class="line">git tag -d &lt;tagname&gt; <span class="comment"># 删除一个本地标签</span></span><br><span class="line">git push origin :refs/tags/&lt;tagname&gt; <span class="comment"># 删除一个远程标签；也就是推送一个空的tag到远程库</span></span><br></pre></td></tr></table></figure>
<h2 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 忽略.vscode目录</span><br><span class="line">**/.vscode/</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/19/常用插件和小工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Astray Wu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/19/常用插件和小工具/" class="post-title-link" itemprop="url">常用插件和小工具</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-19 01:23:42" itemprop="dateCreated datePublished" datetime="2019-04-19T01:23:42+08:00">2019-04-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-12-13 01:27:14" itemprop="dateModified" datetime="2021-12-13T01:27:14+08:00">2021-12-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">2.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">2 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-常用的chrome插件"><a href="#1-常用的chrome插件" class="headerlink" title="1. 常用的chrome插件"></a>1. 常用的chrome插件</h2><ul>
<li><a href="https://chrome.google.com/webstore/detail/context-menus/phlfmkfpmphogkomddckmggcfpmfchpn" target="_blank" rel="noopener">Context Menus/右键搜索</a></li>
<li><a href="https://chrome.google.com/webstore/detail/onetab/chphlpgkkbolifaimnlloiipkdnihall?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">One Tab</a> 基本必备的插件</li>
<li><a href="https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">IE tab</a> 还没有试验过，不过有些网站确实只支持IE</li>
<li><a href="https://chrome.google.com/webstore/detail/google-scholar-button/ldipcbpaocekfooobnbcddclnhejkcpn" target="_blank" rel="noopener">Google Scholar Button</a></li>
<li><a href="https://chrome.google.com/webstore/detail/lastpass-free-password-ma/hdokiejnpimakedhajhdlcegeplioahd" target="_blank" rel="noopener">LastPass: Free Password Manager</a> 以前还挺经常用的，不过现在直接用google账号就可以存好多密码了</li>
<li><a href="https://chrome.google.com/webstore/detail/wizclipper/jfanfpmalehkemdiiebjljddhgojhfab" target="_blank" rel="noopener">WizClipper/为知笔记</a></li>
<li><a href="https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc" target="_blank" rel="noopener">Octotree</a> 用于github阅读</li>
<li><a href="http://www.internetdownloadmanager.com/" target="_blank" rel="noopener">IDM</a> IDM配合chrome使用</li>
<li><a href="https://chrome.google.com/webstore/detail/ticktick-todo-task-list/diankknpkndanachmlckaikddgcehkod" target="_blank" rel="noopener">TickTick - Todo &amp; Task List</a> 有时候需要同步手机上的清单</li>
<li><a href="https://chrome.google.com/webstore/detail/%E8%B0%B7%E6%AD%8C%E8%AE%BF%E9%97%AE%E5%8A%A9%E6%89%8B/gocklaboggjfkolaknpbhddbaopcepfp" target="_blank" rel="noopener">谷歌访问助手</a> 没有VPN时候就靠这个活着了</li>
<li><a href="https://chrome.google.com/webstore/detail/im-feeling-lucky/cnlabakikmdekpfaflaihcepfkjopgll" target="_blank" rel="noopener">I’m Feeling Lucky</a> <a href="https://www.techjunkie.com/im-feeling-lucky/" target="_blank" rel="noopener">How to add Google’s I’m Feeling Lucky Option to Your Chrome Search Engines</a></li>
</ul>
<h2 id="2-vscode常用插件及相关配置"><a href="#2-vscode常用插件及相关配置" class="headerlink" title="2. vscode常用插件及相关配置"></a>2. vscode常用插件及相关配置</h2><h3 id="2-1-插件"><a href="#2-1-插件" class="headerlink" title="2.1. 插件"></a>2.1. 插件</h3><ol>
<li>vscode-icons<br> 文件格式一目了然，左侧文件目录的文件夹和文件都会显示相应的图标</li>
<li>Bracket Pair Colorizer<br> 括号用不同颜色标识</li>
<li>Git History<br>在vscode中添加git log</li>
<li>LaTex language support</li>
<li>LeetCode</li>
<li><p>Markdown All in One<br>可以使用github flavored markdown渲染标准</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"markdown.styles": ["D:\\Documents\\01.Github\\01.markdown-css\\github-markdown.css"],</span><br></pre></td></tr></table></figure>
</li>
<li><p>Markdown Math<br>在markdown中支持数学公式</p>
</li>
<li>Markdown Preview Enhance<br>用于预览markdown</li>
<li>Markdown Shortcuts<br>添加一些快捷键，写作时比较方便</li>
<li><p>Markdown TOC<br>添加目录功能注意，并且可以在header中添加序号。<br>根据markdownlint的语法要求，一级标题应该仅有一个座位文章的标题，所以需要在二级标题中启动编号。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"markdown-toc.depthFrom": 2,</span><br></pre></td></tr></table></figure>
</li>
<li><p>markdownlint<br>对md文件做语法检查</p>
</li>
<li><p>Paste Image<br>方便在.md文件中复制图片，可以配置在当前同文件名的文件夹下，便于分类</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"pasteImage.path": "$&#123;currentFileDir&#125;/$&#123;currentFileNameWithoutExt&#125;/",</span><br></pre></td></tr></table></figure>
</li>
<li><p>Setting Sync</p>
</li>
<li><p>TODO Highlight<br>高亮TODO并扩展</p>
</li>
<li><p>OneDark-Pro<br>Atom’s ionic主题（首选项-颜色主题修改主题    </p>
</li>
<li>T</li>
</ol>
<h3 id="2-2-配置"><a href="#2-2-配置" class="headerlink" title="2.2. 配置"></a>2.2. 配置</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"editor.mouseWheelZoom": true,</span><br><span class="line">"editor.fontFamily": "Consolas, 'Courier New', monospace",</span><br><span class="line">"workbench.colorTheme": "One Dark Pro",</span><br></pre></td></tr></table></figure>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><ul>
<li><a href="https://aoenian.github.io/2018/12/24/vscode-markdown-to-pdf/" target="_blank" rel="noopener">vscode编辑markdown文件并导出为PDF格式</a></li>
</ul>
<h2 id="3-实用的软件"><a href="#3-实用的软件" class="headerlink" title="3. 实用的软件"></a>3. 实用的软件</h2><h3 id="3-1-实际使用"><a href="#3-1-实际使用" class="headerlink" title="3.1. 实际使用"></a>3.1. 实际使用</h3><ul>
<li>SumatraPDF/福昕阅读器 小巧的PDF阅读器，不过不能编辑</li>
<li>Total Commander/Q-Dir/Clover 多窗口多标签的资源管理器，文件整理工具</li>
<li><strong>Launchy</strong>/Wox 快速启动</li>
<li><strong>Eeverthing</strong> 快速搜索</li>
<li>MediaInfo 强大的视频参数检测工具</li>
<li>MathType Word中插入公式</li>
<li>calibre 电子书管理器</li>
<li>KMSpico 用于注册Microsoft Office</li>
<li>Potplayer 好用的视频播放器</li>
<li><strong>Ditto</strong> 剪切板管理工具，可以记录多个剪切板，写代码很实用</li>
<li>火绒安全软件</li>
<li>Internet Download Manager 下载工具</li>
<li>Listary Pro 还没用起来，文件浏览工具，TODO</li>
<li><strong>MobaXterm</strong>/cmder XShell的替代品，全能终端神器</li>
<li>ShadowsocksR-dotnet4.0 VPN工具</li>
<li>搜狗壁纸 桌面管理工具</li>
<li>欧路词典 可以自由搭配词典，自由性比较高</li>
<li>Thunder5 使用专门版本的迅雷，不会被限速，简单速度高</li>
<li><strong>Beyond Compare</strong> 比对工具</li>
<li><strong>Quicker</strong> 效率神器，启动、复制、查找等重复性工作的自动化工具</li>
<li>TeamViewer 功能强大的远程控制软件</li>
<li>WinSCP SCP文件传输软件，有点类似Total Commander的界面，同步很方便</li>
<li>每日英语听力 练习英语</li>
<li>软媒魔方 系统优化工具</li>
<li><strong>Snipaste</strong> 简单强大的截图工具，很实用</li>
<li>Mathpix Snip 数学公式的OCR工具，用于Latex等</li>
<li>Xmind/幕布 思维导图工具，TODO</li>
<li>为知笔记 笔记工具</li>
<li><strong>unlocker</strong> 强力解除工具，用于解决文件占用问题</li>
<li>Geek Uninstaller 还未使用，TODO</li>
<li><strong>DesktopCal</strong> 桌面日历</li>
<li>Seer、QuickLook windows查看工具，TODO</li>
<li>Screen to GIF/Ocam fit录制/剪辑工具</li>
<li>冰点下载 百度文库的免费下载器</li>
<li>Collagelt 拼图，TODO</li>
<li>7-Zip</li>
<li>SpaceSniffer</li>
<li>Duplicate Cleaner TODD</li>
<li>SyncToy 文件夾同步工具 TODO</li>
<li>Icaros 让资源管理器能够显示所有视频格式缩略图，缩略图拓展增强插件 Icaros TODO</li>
<li>Smallpdf</li>
<li><a href="https://github.com/soimort/you-get" target="_blank" rel="noopener">you-get</a> 下载视频神器</li>
</ul>
<h3 id="3-2-ref"><a href="#3-2-ref" class="headerlink" title="3.2. ref"></a>3.2. ref</h3><ul>
<li><a href="https://www.zhihu.com/question/300735799/answer/604585413" target="_blank" rel="noopener">有哪些软件堪称神器，却不为大众所知？</a></li>
</ul>
<h2 id="4-实用的网站"><a href="#4-实用的网站" class="headerlink" title="4. 实用的网站"></a>4. 实用的网站</h2><ul>
<li><a href="https://mubu.com/" target="_blank" rel="noopener">极简大纲笔记 | 一键生成思维导图</a></li>
<li><a href="https://uzer.me/" target="_blank" rel="noopener">UZER.ME云端超级应用空间</a></li>
<li><a href="http://bigjpg.com/" target="_blank" rel="noopener">AI人工智能图片放大</a></li>
<li><a href="https://burner.bonanza.com/" target="_blank" rel="noopener">Background Burner: Remove Image Backgrounds Free &amp; Fast</a> 抠图</li>
<li><a href="https://www.wolframalpha.com/" target="_blank" rel="noopener">wolframalpha</a></li>
<li><a href="http://tools.jb51.net/" target="_blank" rel="noopener">脚本之家</a></li>
</ul>
<h2 id="5-Office"><a href="#5-Office" class="headerlink" title="5. Office"></a>5. Office</h2><ul>
<li><a href="https://www.jiandaoyun.com/f/5b4fe560ba4f62256657ec95" target="_blank" rel="noopener">Office插件</a></li>
<li><a href="http://www.hippter.com/" target="_blank" rel="noopener">HiPPTer</a></li>
<li><a href="http://www.ffcell.com/" target="_blank" rel="noopener">方方格子</a></li>
</ul>
<h2 id="6-IOS"><a href="#6-IOS" class="headerlink" title="6. IOS"></a>6. IOS</h2><ul>
<li><a href="https://www.zhihu.com/question/271740133" target="_blank" rel="noopener">在当下使用 iPad 有哪些值得推荐的应用？</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Astray Wu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">24</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Astray Wu</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="Symbols count total">80k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="Reading time total">1:13</span>
  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  



  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: "AMS"
      }
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
      for (i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
  overflow: auto hidden;
}
</style>

    
  


  

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function(i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
        var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var range = document.createRange(); //For Chrome
        var sel = window.getSelection(); //For Chrome
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; //Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.value = code;
        ta.textContent = code; //For FireFox
        ta.contentEditable = true;
        ta.readOnly = false;
        document.body.appendChild(ta);
        range.selectNode(ta);
        sel.removeAllRanges();
        sel.addRange(range);
        ta.setSelectionRange(0, code.length);
        var result = document.execCommand('copy');
        
        ta.blur(); //For iOS
        $(this).blur();
      })).on('mouseleave', function(e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function() {
          $b.text('Copy');
        }, 300);
      }).append(e);
    })
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


  

</body>
</html>
